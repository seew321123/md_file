### 2020.04.03

- [x] 确认列表页、搜索页、详情页以及产品添加至购物车时的价格均一致。
- [x] 列表页步进器当用户输入符号或e等字符时应当强行转化为0。
- [x] 确认产品不需要规格属性
- [x] 实现支付成功后的逻辑。
- [x] 测试支付功能
- [x] 确认取消订单、立即支付按钮在订单的两个页面中显示的逻辑。
- [ ] 用户的积分应该在订单完成后，结算给该用户，当用户发起退货时，如果订单状态已经完成，则要扣除该用户得到的积分。
- [ ] 需要和客户确认每个代金券能够被领取的次数。
- [x] 确认用户代金券选项中的代金券都可以使用。
- [x] 确保退货页面的价格计算没有错误。
- [x] 编辑个人信息为空时，需要提醒并返回错误。
- [ ] ~~昵称以及提交订单时的remark不能为敏感词汇。~~
- [x] 管理收货地址删除，改为重新定位区域。
- [x] 用户的付款动作中，完成以后跳转页面的配置以及未完成而跳转的页面。
- [x] 重新定位，应当跳转至定位页面，确保用户能够在已经定位的情况下可以重新选择定位区域。
- [x] 列表页以及搜索页加载产品只加载用户所属区域的产品
- [x] 将订单详情中的立即付款事件处理好
- [x] 全部分类不显示，fix it
- [x] 实现跳转至购物车
- [x] 会员卡支付





### 2020.04.08

- [x] 当用户选择会员卡支付却未支付成功时，在订单详情界面可以再次支付，或者取消订单。再次支付之前，先判断其支付方式。
- [x] 删除产品的规格
- [x] 给所有产品增加一个产地与重量的属性
- [ ] ~~申请退货后的逻辑实现补充，积分扣除，分销订单状态同步~~



- [ ] 产品管理

  ~~产品的增删改查~~

  新建产品时，如果产品对应的二级分类与其品牌对应的二级分类不对应，则将会报错返回

  

- [x] 两个分类管理

  分类的增长改查

  

- [x] 品牌管理

  品牌的增删改查

  

- [x] 订单管理

  订单的查询，删除，订单状态修改

  加载订单详情，实际上是通过系统订单的便捷性展示当前订单的信息，但因为涉及到退货问题，所以订单状态应该沿用应用订单的订单状态。

  发货流程：

  1. 管理员点击发货，首先判断订单状态是否为待发货，否则报错返回。

  2. 调用系统接口，完成发货。

  3. 将应用订单表中的状态改为已发货，同时也同步分销订单条目。

     

  订单状态不能与系统订单同步的注意事项：

  1. 使用会员卡支付后，系统订单无法改为已支付，因此在订单管理界面的订单显示状态中，需要区分显示或者直接不显示这部分内容。

  2. 商家确认订单完成时，因为通过会员卡支付的系统订单状态可能为“to_pay”,因此可能无法完成商家确认的动作。

  3. 通过会员卡支付的订单，商家确认发货以后，应用的订单状态无法实时同步为send状态，需要手动设置。

  4. 申请退货的订单，其系统订单将一直保持已完成的状态。

     

- [x] 退货管理

  退货申请的审批

  退货流程：

  1. 当管理员点击同意申请退货按钮时，退货状态将被修改为receive,同时应用订单状态应该被修改为cancel,同步的分销订单状态应该被改为cancel

  2. 当管理员点击拒绝申请退货按钮时，退货状态将被修改为reject。

  3. 当管理员点击确认退款按钮时，将指定的订单款项原路返还用户账号,将退货信息中的is_return_money字段由false改为true.由此想到，退款数据行顶部应该有两个tab切换组件，用于筛选全部退款申请以及不同状态的退款申请，同时还要能筛选出已退款以及未退款的退款申请。

     默认的应该优先展示未退款的数据。

  

- [x] 用户管理

  用户会员等级，折扣比例，余额，所属地区的编辑

  

- [x] 滚动图管理

  滚动图的增删改查

  

- [x] 配置管理

  配置信息的增删改查
  
  
  
- [x] 检查所有管理页面弹出窗关闭时的currentItem设置为null

  

### 2020.04.09

- [x] 在管理员标记订单已完成后，设置一个计划任务，7天后检查如果该订单状态依然为完成，则将积分发放给用户，同时将分佣余额也手动分发给用户。否则证明用户在7天内已经申请退款，则不用分发积分与分佣状态。

- [x] 决定使用微信提现还是手动体现

- [x] 测试用户发起分佣提现申请后，从后台管理系统处理申请的操作。

- [x] 解决用户分享发展下线的发起方式。

- [x] 退货期限的设置

- [x] 订单超时取消

- [ ] 对产品有分销功能或没有分销功能进行区分，当订单状态发生变化时，应当判断订单是否有对应的分销条目。主要步骤如下：

  1. 创建订单时，对没有开启分销功能的产品进行判断，不增加对应的分销条目。

  2. 在订单状态变化时，查询分销订单表中对应的数据行，通过if not 判断符合条件的结果如果一个都没有，就直接返回。

     找到所有订单状态发生变化的位置（除创建订单外）

     - [ ] 订单取消
     - [ ] 订单支付
     - [ ] 订单发货
     - [ ] 订单完成
     - [ ] 订单退货
     - [ ] 订单退货被拒绝

