建材商城测试大纲

1.列表页

- [x] 切换一级分类
- [x] 切换二级分类
- [x] 切换品牌         
- [x] 编辑产品数量
- [x] 跳转产品详情

2.搜索页

- [x] 关键词点击搜索
- [x] 显示产品内容
- [x] 点击产品跳转至相关的详情页
- [x] 当用户删光所有关键词，应该展示所有产品

3.产品详情

- [x] 展示产品滚动图
- [x] 展示产品信息以及详情
- [x] 编辑购物车数量
- [x] 点击跳转购物车以及结算页

4.购物车

- [x] 全选按钮的操控
- [x] 产品的选中与取消
- [x] 产品步进器的编辑
- [x] 跳转至结算页

5.提交页

- [x] 所有能够进入提交页的入口都应该做判断，如果购物车没有任何东西，则报错返回
- [x] 打开关闭挑楼服务以及优惠券选择服务，价格动态变化
- [x] 输入订单备注
- [x] 价格计算
- [x] 会员卡支付余额不足的情况下，应当跳转页面至订单列表
- [x] 当用户不支付或者支付完成后，其可能返回到结算页面，对此应该进行判断，如果购物车条目为空，则报“状态异常”，返回首页
- [ ] 提交订单价格计算，挑楼费应该作为运费的一部分，和运费加起来作为shipment_fee

6.订单列表

- [x] 切换tab过滤订单
- [x] 点击查看详情
- [x] 展示产品单价以及订单总价

7.订单详情

- [x] 展示订单详情信息
- [x] 未付款的订单显示两个按钮：取消订单、立即付款。点击立即付款时，判断订单的付款方式，如果时微信就跳转付款页，如果会员卡支付则判断用户余额，余额不足直接报错返回。取消订单将取消系统订单，取消应用订单，同步分销订单状态
- [x] 买家付款只有返回列表按钮
- [x] 卖家发货的订单，应该也是列表按钮一个按钮
- [x] 已完成的订单，按钮为 申请退货、返回列表
- [x] 退货时，判断是否超出退货期限的动作应该在订单详情页就判断好，否则用户填信息半天发现不能申请会很气。

8.积分商城

- [x] 点击领取代金券
- [x] 领取后刷新，用户积分余额减少
- [x] 点击时判断余额是否充足

9.退货页面

- [x] 退货页面显示产品明细图片错误（已修改未更新）
- [x] 用户点击退货按钮时再次判断时间是否超期
- [x] 上传图片最多三张，再上传就报错返回
- [x] 检查订单状态是否为已完成，不是就报错返回

10.个人中心

- [x] 大多是链接，唯一的数据显示为用户信息头像以及分销余额。需要检查一下

11.个人信息修改（无）

12.定位页面

- [x] 加载所有地址，并根据距离远近排序
- [x] 地理位置大于200km的区域用户无法选择

13.充值中心

- [x] 显示用户信息
- [x] 显示用户余额
- [x] 显示6个充值入口
- [x] 最后一个自定义充值，校对金额是否正则表达式为正整数或两位以内的小数

13.我的分销

- [x] 进入页面后判断当前用户是否开启分销
- [x] 没开启分销的用户显示申请成为分销员页面
- [x] 开启分销的用户显示已完成的分销订单以及提现的入口
- [x] 分销提现页面，用户选择微信支付宝提现方式
- [x] 用户通过微信提现，可以不填写支付宝的数据
- [x] 用户通过支付宝提现，必须填写支付宝数据
- [x] 不管何种提现方式，金额都要为正整数
- [x] 金额如果大于可提现余额，则报错返回

14.广告

- [ ] 广告作为一个首页的弹出容器，宽高参照广告页面

待办事项

- [x] 列表页：切换品牌时，全部的显示内容会消失
- [x] 列表页：检查所有步进器输入是否为数字键盘（列表页需要复原）
- [x] 搜索页：用户删光所有关键词时，并不显示所有产品
- [x] 详情页：微信开发工具中用户编辑步进器输入时，报错，而且success的提示应该去掉（最后修改）
- [x] 购物车：购物车全选按钮一开始默认应该是选中的
- [x] 购物车：产品步进器应该跟列表页一样，将索引获取沿用循环列表索引
- [x] 购物车：输入框的类型被改成了digital，仅限0-9，要参考列表页的类型改过来
- [x] 提交页：所有能够进入提交页的入口都应该做判断，如果购物车没有任何东西，则报错返回
- [x] 提交页：会员卡支付余额不足的情况下，应当跳转页面至订单列表
- [x] 提交页：当用户不支付或者支付完成后，其可能返回到结算页面，对此应该进行判断，如果购物车条目为空，则报“状态异常”，返回首页
- [x] **提交页：提交订单价格计算，挑楼费应该作为运费的一部分，和运费加起来作为shipment_fee**
- [x] 订单列表页：将已取消替换为待收货
- [x] 订单详情页：订单状态根据英文转中文的映射中，待收货没有设置好
- [x] 订单详情页：有返回列表的页面，都检查链接是否正确
- [x] 订单详情页：点击申请退货就应该判断是否超期，
- [x] 个人中心：检查一下用户数据显示是否有误
- [x] 充值中心：增加说明文字，充值后需要一段时间更新数据，不要恐慌
- [x] 首页：将地理位置链接添加到搜索框左侧的标签上，同时动态显示该标签所属地理位置。
- [x] 首页：将广告作为一个独立的弹出层，而不是页面展示出来。
- [x] 产品表：将所有产品品牌改为规格



2020.04.11

- [x] 重新检查三个页面的步进器输入情况

- [x] orderitem的数据结构还没改，规格

- [x] 检查每个查询表动作的页面数目总数是否为1000

- [x] 充值后，页面跳转没设置

- [x] 个人中心的余额应该除以100

- [x] 用户点击充值按钮，直接成为分销员

- [ ] 记得把订单取消时间改回30分钟

- [ ] 记得将微信支付物流费改回来

- [x] 记得将会员卡支付物流费改回来

- [x] 记得把会员充值的额度改回来

- [ ] **所有图片页面都不正常显示图片，需要改图片尺寸**

- [ ] 地址为空居然能提交订单

  

订单状态变化流程需要检测的步骤

- [ ] 使用优惠券付款
- [x] 使用会员卡付款
- [x] 使用微信支付付款
- [x] 带有挑楼费的付款
- [x] 用户微信支付时，系统订单状态可以同步变为待发货，
- [ ] **用户微信支付时，分销订单状态没同步为已支付**
- [x] 用户会员卡支付时，系统订单状态无法同步
- [ ] **用户微信支付时,分销订单状态页没同步为已发货**
- [x] 商家发货时，微信支付的订单可以同步状态为已发货
- [x] 商家发货时，分销订单可以同步
- [x] 商家发货时，会员卡支付的订单无法同步状态为已发货
- [x] 商家发货时，会员卡支付的订单分销订单可以同步
- [x] 用户取消订单时，系统状态额可以同步，分销订单也可以同步
- [x] 用户申请退货，分销订单可以同步，系统订单不可能同步
- [ ] 商家无法取消订单，需要company_id，可以考虑通过获取订单详情的接口找到company_id
- [x] 商家同意退货，订单状态会变为取消，系统订单忽略，分销订单也能同步
- [x] 商家同意退货，订单状态会变为完成，系统订单忽略，分销订单也能同步
- [ ] **但是商家同意退款，用户并没有收到退款，报错为付款金额低于最小金额1元，接下来需要测试更大金额的退款。**
- [x] 用户会员卡余额的扣除
- [ ] **所有系统订单事件以及定时任务是否执行**
- [x] 超时取消订单任务可以执行
- [ ] 无法通过监听系统订单改变状态的场景，是否能够手动改变状态







